schemaVersion: 2.2.0
metadata:
  name: camelk-ws
components:
  - name: tools
    container:
      image: quay.io/devfile/universal-developer-image:ubi8-latest
      #image: registry.redhat.io/devspaces/udi-rhel8@sha256:b0dfd9e15d878785bea5cb33a82a014abbd08c839917e72a8cd629c84bf47f1e
      memoryRequest: 2Gi
      memoryLimit: 6Gi
      cpuLimit: 2000m
      cpuRequest: 1000m
      env:
        - name: KUBEDOCK_ENABLED
          value: "true"
        - name: JAVA_HOME_TEST
          value: /home/tooling/.sdkman/candidates/java/17.0.3-tem
      volumeMounts:
        - name: m2
          path: /home/user/.m2
commands:
  - id: setup-trust
    exec:
      component: tools
      commandLine: "jbang trust add https://github.com/apache/camel/ --verbose && echo 'Trust setup completed'"
  - id: install-camel-jbang
    exec:
      component: tools
      commandLine: "jbang app install camel@apache/camel --verbose && echo 'Camel installed' && source ~/.bashrc"
events:
  postStart:
    - setup-trust
    - install-camel-jbang

